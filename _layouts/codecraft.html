{% capture _unused %}
{% assign meta = site.meta %}
{% assign domain = "https://" | append: site.base.url %}
{% assign folder = domain | append: "/" | append: site.base.folder %}
{% assign asset = folder | append: "/assets" %}
{% assign image = asset | append: "/images" %}
{% assign font = asset | append: "/fonts" %}
{% assign css = asset | append: "/css" %}
{% assign js = asset | append: "/js" %}
{% assign icon = image | append: "/favicon.ico" %}
{% endcapture %}<!DOCTYPE html>
<html lang="{{ meta.locale | default: 'en' }}">
{%- include components/head.html -%}
<body>
    <div id="translate"></div>
    <input type="checkbox" aria-expanded="false" id="menu" autocomplete='off'>
    <header>
        <a tabindex="0" href="{{folder}}" id="logo-link">
            <div id="logo" class="notranslate">
                <img id="logo-pic" width="36px" height="36px" src="{{icon}}" alt="logo">
                {{meta.title}}
            </div>
            <div id="slogan">{{meta.tagline}}</div>
        </a>
    </header>
    <label for="menu" aria-label="Toggle Menu" id="menu-label">
        <div class="border" aria-hidden="true"></div>
        <div class="icon icon-menu" aria-hidden="true"></div>
    </label>
    <aside>
        {%- include components/sidebar.html -%}
    </aside>
    <main>
        <label for="toc"><div class="icon icon-toc" aria-label="Show Table of Contents"></div></label>
        <h1>{{ page.title | capitalize }}</h1>
        <input type="checkbox" aria-expanded="false" id="toc" autocomplete='off'>
        <div id="index"><div id="reading-time"></div><div id="chapters"></div></div>
        {{ content }}
        {% if page.comments and site.utteranc.repo %}
        <div id="comments">
            <h3>Comments</h3>
            <div id="comments-utteranc" class="notranslate"></div>
        </div>
        {% endif %}
    </main>
    {%- include components/script.html -%}
    <script>
        window.blog = {
            {% if page.comments and site.utteranc.repo %}
            comments: {
                {% for item in site.utteranc %}
                "{{ item.first }}": "{{ item.last }}"{% if forloop.last == false %}, {% endif %}
                {% endfor %}
            }
            {% endif %}
        };

        /*
        const loadComments = data => {
            const commentsDiv = document.getElementById("comments-utteranc");
            if (commentsDiv) {
                const script = document.createElement("script");
                const config = {
                    theme: data.theme || "github-light",
                    issue: data.issue || "title",
                    repo: data.repo,
                    src: data.src
                };
            if (!config.repo || !config.src) {
                console.error("Repository and source are required to load comments.");
                return;
            }
            script.src = config.src;
            script.setAttribute("theme", config.theme);
            script.setAttribute("issue-term", config.issue);
            script.setAttribute("repo", config.repo);
            script.setAttribute("crossorigin", "anonymous");
            script.async = true;
            commentsDiv.appendChild(script);
        }
    };
    */

    const loadComments = ({ theme = "github-light", issue = "title", repo, src }) => {
        const commentsDiv = document.getElementById("comments-utteranc");
        if (!commentsDiv) return;
            if (!repo || !src) {
                console.error("Repository and source are required to load comments.");
                return;
            }
            const script = Object.assign(document.createElement("script"), {
                src,
                async: true,
                crossorigin: "anonymous"
            });
            script.setAttribute("theme", theme);
            script.setAttribute("issue-term", issue);
            script.setAttribute("repo", repo);
            commentsDiv.appendChild(script);
    };


    document.addEventListener("DOMContentLoaded", ()=> {
        
        if (window.blog.comments) {
            loadComments(window.blog.comments);
        }

        
    });
  </script>
</body>
</html>